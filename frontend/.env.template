# Frontend Environment Variables
# Copy this file to .env.local and fill in your values

# Google OAuth Client ID (get from Google Cloud Console)
VITE_GOOGLE_CLIENT_ID=your_google_client_id_here

# API Configuration
VITE_API_BASE_URL=http://localhost:5000
VITE_API_TIMEOUT=10000

# App Configuration
VITE_APP_NAME=TalkSphere AI
VITE_APP_VERSION=1.0.0

# Feature Flags (set to "false" to disable)
VITE_ENABLE_GOOGLE_AUTH=true
VITE_ENABLE_DARK_MODE=true
VITE_ENABLE_VOICE_INPUT=true
VITE_ENABLE_IMAGE_UPLOAD=true
VITE_ENABLE_PREMIUM=true
VITE_ENABLE_ANALYTICS=false

# UI Configuration
VITE_ENABLE_ANIMATIONS=true
VITE_ENABLE_TRANSITIONS=true

# Limits and Constraints
VITE_FREE_USER_LIMIT=5
VITE_MAX_FILE_SIZE=10MB
VITE_MAX_MESSAGE_LENGTH=4000
VITE_RATE_LIMIT_WINDOW=86400000

# Debug Configuration (for development)
VITE_DEBUG=false
VITE_DEBUG_API=false
VITE_DEBUG_STATE=false
    baseUrl:
      import.meta.env.VITE_API_BASE_URL ||
      (import.meta.env.PROD
        ? "https://talksphere.com"
        : "http://localhost:5000"),
    timeout: Number(import.meta.env.VITE_API_TIMEOUT) || 10000,
    endpoints: {
      auth: "/api/auth",
      bots: "/api/bots",
      openai: "/api/openai",
      stats: "/api/stats",
      usage: "/api/usage",
    },
  },

  // ------------------------------
  // üîê Authentication
  // ------------------------------
  auth: {
    googleClientId: import.meta.env.VITE_GOOGLE_CLIENT_ID || "",
    tokenKey: "token",
    loginRedirect: "chat",
    logoutRedirect: "home",
  },

  // ------------------------------
  // ‚öôÔ∏è Application Metadata
  // ------------------------------
  app: {
    name: import.meta.env.VITE_APP_NAME || "TalkSphere AI",
    version: import.meta.env.VITE_APP_VERSION || "1.0.0",
    description:
      "Access GPT-4, Claude, Gemini, and more ‚Äî all from one beautiful interface.",
    logo: {
      small: "/logo/logo.png",
      large: "/logo/logo-large.png",
      favicon: "/logo/favicon.png",
    },
  },

  // ------------------------------
  // üöÄ Feature Flags
  // ------------------------------
  features: {
    googleAuth: import.meta.env.VITE_ENABLE_GOOGLE_AUTH !== "false",
    darkMode: import.meta.env.VITE_ENABLE_DARK_MODE !== "false",
    voiceInput: import.meta.env.VITE_ENABLE_VOICE_INPUT !== "false",
    imageUpload: import.meta.env.VITE_ENABLE_IMAGE_UPLOAD !== "false",
    premium: import.meta.env.VITE_ENABLE_PREMIUM !== "false",
    analytics: import.meta.env.VITE_ENABLE_ANALYTICS === "true",
  },

  // ------------------------------
  // üé® UI Configuration
  // ------------------------------
  ui: {
    theme: {
      primary: "indigo",
      secondary: "purple",
      success: "green",
      warning: "yellow",
      error: "red",
    },
    animations: import.meta.env.VITE_ENABLE_ANIMATIONS !== "false",
    transitions: import.meta.env.VITE_ENABLE_TRANSITIONS !== "false",
  },

  // ------------------------------
  // üìè Limits and Constraints
  // ------------------------------
  limits: {
    freeUserQueries: Number(import.meta.env.VITE_FREE_USER_LIMIT) || 5,
    maxFileSize: import.meta.env.VITE_MAX_FILE_SIZE || "10MB",
    maxMessageLength: Number(import.meta.env.VITE_MAX_MESSAGE_LENGTH) || 4000,
    rateLimitWindow: Number(import.meta.env.VITE_RATE_LIMIT_WINDOW) || 86400000,
  },

  // ------------------------------
  // üêû Debug Configuration
  // ------------------------------
  debug: {
    enabled: !import.meta.env.PROD && import.meta.env.VITE_DEBUG === "true",
    showApiCalls: import.meta.env.VITE_DEBUG_API === "true",
    showStateChanges: import.meta.env.VITE_DEBUG_STATE === "true",
  },
};

// ================================
// üß© Validation Logic
// ================================
export function validateConfig() {
  const warnings = [];
  const errors = [];

  // Missing Google Client ID
  if (config.features.googleAuth && !config.auth.googleClientId) {
    warnings.push("‚ö†Ô∏è Google Sign-In enabled but no CLIENT_ID configured.");
  }

  // Using localhost in production
  if (import.meta.env.PROD && config.api.baseUrl.includes("localhost")) {
    warnings.push("‚ö†Ô∏è Using localhost API URL in production build!");
  }

  return { warnings, errors };
}

// Automatically show warnings in dev
const { warnings } = validateConfig();
if (warnings.length && import.meta.env.DEV) {
  console.groupCollapsed("‚ö†Ô∏è TalkSphere Config Warnings");
  warnings.forEach((w) => console.warn(w));
  console.groupEnd();
}

// ================================
// üõ†Ô∏è Utility Functions
// ================================
export function getApiUrl(endpoint = "") {
  const baseUrl = config.api.baseUrl.replace(/\/$/, "");
  const path = endpoint.startsWith("/") ? endpoint : `/${endpoint}`;
  return `${baseUrl}${path}`;
}

export function isFeatureEnabled(feature) {
  return config.features[feature] || false;
}

export function getThemeColor(color) {
  return config.ui.theme[color] || color;
}

export function isDebugMode() {
  return config.debug.enabled;
}

// ================================
// ‚ôªÔ∏è Legacy Exports (backward compatibility)
// ================================
export const GOOGLE_CLIENT_ID = config.auth.googleClientId;
export const API_BASE_URL = config.api.baseUrl;
export const APP_NAME = config.app.name;
export const VERSION = config.app.version;

export default config;
